-- CREAR USUARIO, DONDE SE ALMACENARA LAS TABLAS
--CREATE USER PROYECTO_INTEGRADOR IDENTIFIED BY 123456;
--GRANT DBA TO PROYECTO_INTEGRADOR;

-- CREAR LAS TABLAS
-- CREAR LAS TABLAS
CREATE TABLE ROL(
    ID_ROL NUMBER,
    NOMBRE VARCHAR(20) NOT NULL,
    HORA NUMBER, 
    CONSTRAINT PK_ID_ROL PRIMARY KEY (ID_ROL)
);

CREATE TABLE PARTICIPANTE(
    ID_PARTICIPANTE NUMBER,
    HORA NUMBER  default 0,
    ID_ROL NUMBER,
    ID_PROYECTO NUMBER NOT NULL,
    ID_USUARIO NUMBER NOT NULL,
    ID_GRUPO NUMBER,
    CONSTRAINT PK_ID_PARTICIPANTE PRIMARY KEY (ID_PARTICIPANTE),
    CONSTRAINT FK_ID_ROL_IN_PARTICIPANTE FOREIGN KEY (ID_ROL) REFERENCES ROL(ID_ROL),
    CONSTRAINT FK_ID_PROYECTO_IN_PARTICIPANTE FOREIGN KEY (ID_PROYECTO) REFERENCES PROYECTO(ID_PROYECTO),
    CONSTRAINT FK_ID_USUARIO_IN_PARTICIPANTE FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),
    CONSTRAINT FK_ID_GRUPO_IN_PARTICIPANTE FOREIGN KEY (ID_GRUPO) REFERENCES GRUPO(ID_GRUPO)
);

CREATE TABLE PROYECTO(
    ID_PROYECTO NUMBER,
    CODIGO VARCHAR(15) UNIQUE,
    NOMBRE_ESCUELA VARCHAR(30) NOT NULL,
    COORDINADORA VARCHAR(30) NOT NULL,
    NOMBRE VARCHAR(80) NOT NULL,
    LUGAR VARCHAR(80),
    FECHA_INICIO TIMESTAMP(0),
    FECHA_FIN TIMESTAMP(0),
    TIPO_CONVENIO VARCHAR(50),
    OBJETIVOS VARCHAR(200),
    DESCRIPCION VARCHAR(1000),
    URL_INFORME_FINAL VARCHAR(100),
    CONSTRAINT PK_ID_PROYECTO PRIMARY KEY (ID_PROYECTO)
);
----------------------------------- SE AGREGO ESTA TABLA PARA EL ADMINISTRACION DE LOS RECURSOS
CREATE TABLE RECURSO(
    ID_RECURSO NUMBER,
    ID_PROYECTO NUMBER NOT NULL,
    URL_RECUSO VARCHAR(100) NOT NULL,
    CONSTRAINT PK_ID_RECURSO PRIMARY KEY(ID_RECURSO),
    CONSTRAINT FK_ID_PROYECTO_IN_RECURSO FOREIGN KEY (ID_PROYECTO) REFERENCES PROYECTO(ID_PROYECTO)
);
-----------------------------------
CREATE TABLE USUARIO(
    ID_USUARIO NUMBER,
    CONSTRAINT PK_ID_USUARIO PRIMARY KEY (ID_USUARIO)
);

CREATE TABLE ESTUDIANTE(
    ID_ESTUDIANTE NUMBER,
    CODIGO VARCHAR(12) UNIQUE,
    NOMBRE VARCHAR(20) NOT NULL,
    FACULTAD VARCHAR(5) NOT NULL,
    ESCUELA VARCHAR(30) NOT NULL,
    CICLO VARCHAR(4) NOT NULL,
    GRUPO VARCHAR(9) NOT NULL,
    ID_USUARIO NUMBER UNIQUE,
    CONSTRAINT PK_ID_ESTUDIANTE PRIMARY KEY (ID_ESTUDIANTE),
    CONSTRAINT FK_ID_USUARIO_IN_ESTUDIANTE FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)
);

CREATE TABLE DOCENTE (
    ID_DOCENTE NUMBER,
    NOMBRE VARCHAR(20) NOT NULL,
    CURSO_ARTICULADO VARCHAR(20) NOT NULL,
    ID_USUARIO NUMBER UNIQUE,
    CONSTRAINT PK_ID_DOCENTE PRIMARY KEY (ID_DOCENTE),
    CONSTRAINT FK_ID_USUARIO_IN_DOCENTE FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)
);

CREATE TABLE PLANTILLA(
    ID_PLANTILLA NUMBER,
    NOMBRE VARCHAR(20) NOT NULL,
    TIPO VARCHAR(20),
    DESCRIPCION VARCHAR(500),
    URL_DOCUMENTO VARCHAR(100),
    ID_DOCENTE NUMBER,
    CONSTRAINT PK_ID_PLANTILLA PRIMARY KEY (ID_PLANTILLA),
    CONSTRAINT FK_ID_DOCENTE_IN_PLANTILLA FOREIGN KEY (ID_DOCENTE) REFERENCES DOCENTE(ID_DOCENTE)
);

CREATE TABLE FECHA_EJECUCION(
    ID_FECHA_EJECUCION NUMBER,
    ASISTENCIA NUMBER(1) NOT NULL,
    ID_PARTICIPANTE NUMBER NOT NULL,
    ID_ACTIVIDAD NUMBER NOT NULL,
    CONSTRAINT PK_ID_FECHA_EJECUCION PRIMARY KEY (ID_FECHA_EJECUCION),
    CONSTRAINT FK_ID_ACTIVIDAD_IN_FECHA_EJECUCION FOREIGN KEY (ID_ACTIVIDAD) REFERENCES ACTIVIDAD(ID_ACTIVIDAD),
    CONSTRAINT FK_ID_PARTICIPANTE_IN_FECHA_EJECUCION FOREIGN KEY (ID_PARTICIPANTE) REFERENCES PARTICIPANTE(ID_PARTICIPANTE)
);

CREATE TABLE ACTIVIDAD(
    ID_ACTIVIDAD NUMBER,
    NOMBRE VARCHAR(100) NOT NULL,
    FECHA TIMESTAMP(0),
    URL_INFORME_ACTIVIDAD VARCHAR(100),
    CONSTRAINT PK_ID_ACTIVIDAD PRIMARY KEY (ID_ACTIVIDAD)
);

CREATE TABLE GRUPO(
    ID_GRUPO NUMBER,
    CONSTRAINT PK_ID_GRUPO PRIMARY KEY (ID_GRUPO)
);

-- CONSTRAINT NOMBRE PRIMARY KEY(ID_TABLE);
-- CONSTRAINT NOMBRE FOREIGN KEY(ID_TABLE) REFERENCES TABLE(ID_OTHER_TABLE);

-- CONSTRAINT NOMBRE PRIMARY KEY(ID_TABLE);
-- CONSTRAINT NOMBRE FOREIGN KEY(ID_TABLE) REFERENCES TABLE(ID_OTHER_TABLE);